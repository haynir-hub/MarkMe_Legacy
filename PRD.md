# 🟧 VIDEO MARKME — PRD (Canvas Version)

## מטרת המוצר

תוכנה מקומית (Desktop) שמאפשרת:

* טעינת סרטון עד דקה (4K).
* סימון ידני של שחקניות בפריים הראשון.
* מעקב אוטומטי אחר כל שחקנית לאורך הסרטון.
* הוספת סימון ויזואלי לפי בחירת המשתמש.
* ייצוא וידאו חדש באיכות מקורית ללא פגיעה בסאונד.
* תמיכה במספר שחקניות במקביל, כל אחת עם סגנון סימון שונה.

## יעוד

התוכנה עושה **אך ורק** מעקב שחקניות והוספת סימן. ללא פיצ'רים נוספים.

---

## 1. ייבוא וידאו

* פורמטים נתמכים: mp4 / mov / mkv
* רזולוציה: עד 4K 60fps
* אורך: עד 60 שניות
* לאחר טעינה מוצג הפריים הראשון

---

## 2. סימון שחקניות

### אפשרויות סימון:

* בחירת פריים התחלתי (ברירת מחדל: 0)
* סימון Bounding Box באמצעות Drag & Drop
* שם אופציונלי לשחקנית
* בחירת סגנון סימון:

  1. חץ מעל הראש
  2. עיגול זוהר סביב הרגליים
  3. Highlight Rectangle
* תמיכה במספר שחקניות במקביל
* כל שחקנית נשמרת כ-track נפרד

---

## 3. מנוע מעקב

* מבוסס OpenCV
* שימוש ב-CSRT / KCF
* DeepSORT אופציונלי עם GPU
* מעקב Frame-by-Frame
* Smoothing לתנועה
* תיקון קפיצות Tracking
* יציבות לאורך הסרטון

---

## 4. יישום סימוני המעקב

בכל Frame:

* ציור האלמנט הגרפי במיקום העדכני
* Overlay באיכות גבוהה
* צבעי ברירת מחדל:

  * חץ: צהוב
  * עיגול זוהר: תכלת
  * מלבן Highlight: אדום
* ללא שינוי בסאונד
* ללא פגיעה בפריים המקורי

---

## 5. ייצוא וידאו

* שימוש ב-FFmpeg
* שמירת כל פרמטרי האיכות:

  * codec זהה
  * bitrate זהה
  * fps זהה
  * רזולוציה זהה
* אודיו: passthrough
* שם קובץ: output_with_tracking.mp4

---

## 6. UI — ממשק משתמש

### מסך ראשי:

* Load Video
* Video Preview
* Add Player Marker
* רשימת שחקניות מסומנות
* Start Tracking
* Export Video

### סימון שחקנית:

* בחירת מלבן
* בחירת סגנון סימון
* שמירה

### מצב עיבוד:

* Progress Bar
* הודעות:

  * "Tracking Lost — Recovering…"
  * "Unsupported File Format"

---

## 7. ארכיטקטורה

```
/src
   /ui
      main_window.py
      video_canvas.py
      player_selector.py
   /tracking
      tracker_manager.py
      player_tracker.py
   /render
      overlay_renderer.py
      video_exporter.py
/app.py
/requirements.txt
```

---

## 8. טכנולוגיות

* Python 3.10+
* PyQt6
* OpenCV
* FFmpeg
* Numpy

---

## 9. אילוצים

* ריצה מקומית בלבד
* אין שימוש באינטרנט
* אין פיצ'רים מעבר למעקב וסימון
* חובה לשמור איכות מקור

---

## 10. Acceptance Criteria

* ✔ טעינת סרטון 4K
* ✔ סימון מספר שחקניות
* ✔ כל שחקנית מקבלת מעקב יציב
* ✔ שמירת איכות מלאה
* ✔ סימון מדויק לאורך כל הסרטון
* ✔ פלט נקי ללא פגיעה באודיו
* ✔ ללא תלות חיצונית
